<nav class="navbar" [class.scrolled]="isScrolled()">
  <div class="nav-container">
    <div class="nav-logo">
      <a routerLink="/home" class="logo-link">
        <img
          src="assets/images/personal-icon.png"
          alt="KG"
          class="logo-image"
        />
      </a>
    </div>

    <div class="nav-center">
      <div class="nav-tabs-container">
        <div class="nav-tabs">
          @for (item of navigationItems(); track item.id) {
            <div class="nav-tab" [class.active]="isCurrentRoute(item.route)">
              <a
                [routerLink]="item.route"
                class="nav-tab-link"
                routerLinkActive="active"
              >
                <div class="nav-tab-icon">
                  <i [class]="getIconClass(item.id)" class="tab-icon"></i>
                </div>
                <span class="nav-tab-label">{{ item.label }}</span>
              </a>
            </div>
          }
        </div>
      </div>
    </div>

    <div class="nav-actions">
      <button
        class="theme-toggle"
        (click)="toggleTheme()"
        [attr.aria-label]="
          'Switch to ' +
          (themeService.currentTheme() === 'light' ? 'dark' : 'light') +
          ' theme'
        "
        title="Toggle theme"
      >
        <i
          class="fas"
          [class.fa-sun]="themeService.currentTheme() === 'light'"
          [class.fa-moon]="themeService.currentTheme() === 'dark'"
          [class.sun-icon]="themeService.currentTheme() === 'light'"
          [class.moon-icon]="themeService.currentTheme() === 'dark'"
        ></i>
      </button>

      <div
        class="hamburger"
        [class.active]="isMobileMenuOpen()"
        (click)="toggleMobileMenu()"
      >
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </div>
    </div>
  </div>
</nav>

<!-- Mobile Navigation Menu -->
@if (isMobileMenuOpen()) {
  <div 
    class="mobile-nav-menu-backdrop"
    tabindex="0"
    role="button"
    aria-label="Close mobile menu"
    (click)="closeMobileMenu()"
    (keydown)="onBackdropKeyDown($event)"
  ></div>
}
<div 
  class="mobile-nav-menu" 
  [class.active]="isMobileMenuOpen()"
  (click)="$event.stopPropagation()"
>
  <div class="nav-tabs">
    @for (item of navigationItems(); track item.id) {
      <div class="nav-tab" [class.active]="isCurrentRoute(item.route)">
        <a
          [routerLink]="item.route"
          class="nav-tab-link"
          routerLinkActive="active"
          (click)="closeMobileMenu()"
        >
          <div class="nav-tab-icon">
            <i [class]="getIconClass(item.id)" class="tab-icon"></i>
          </div>
          <span class="nav-tab-label">{{ item.label }}</span>
        </a>
      </div>
    }
  </div>

  <!-- Theme Toggle in Sidebar -->
  <div class="mobile-theme-toggle">
    <button
      class="theme-toggle"
      (click)="toggleTheme()"
      [attr.aria-label]="
        'Switch to ' +
        (themeService.currentTheme() === 'light' ? 'dark' : 'light') +
        ' theme'
      "
      title="Toggle theme"
    >
      <i
        class="fas"
        [class.fa-sun]="themeService.currentTheme() === 'light'"
        [class.fa-moon]="themeService.currentTheme() === 'dark'"
        [class.sun-icon]="themeService.currentTheme() === 'light'"
        [class.moon-icon]="themeService.currentTheme() === 'dark'"
      ></i>
    </button>
  </div>
</div>
